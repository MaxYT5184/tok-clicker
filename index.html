<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tok Clicker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --tiktok-black: #000000;
            --tiktok-teal: #25F4EE;
            --tiktok-pink: #FE2C55;
            --tiktok-purple: #7B61FF;
            --tiktok-yellow: #FFD600;
            --tiktok-gradient: linear-gradient(90deg, #25F4EE, #FE2C55, #7B61FF);
            --card-bg: rgba(30, 30, 30, 0.9);
            --card-border: rgba(255, 255, 255, 0.1);
            --hover-glow: 0 0 20px rgba(37, 244, 238, 0.5);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: linear-gradient(135deg, #000000 0%, #0a0a0a 50%, #121212 100%);
            color: white;
            min-height: 100vh;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(37, 244, 238, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(254, 44, 85, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(123, 97, 255, 0.1) 0%, transparent 50%);
            z-index: -1;
            pointer-events: none;
        }
        
        .container {
            max-width: 1200px;
            width: 100%;
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            padding: 25px;
            box-shadow: 
                0 20px 50px rgba(0, 0, 0, 0.8),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--tiktok-gradient);
            z-index: 2;
        }
        
        .container::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(45deg, transparent 0%, rgba(37, 244, 238, 0.05) 50%, transparent 100%);
            pointer-events: none;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        
        .title-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        h1 {
            background: var(--tiktok-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-size: 3.5em;
            font-weight: 900;
            text-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            letter-spacing: 1px;
            position: relative;
        }
        
        .title-badge {
            background: var(--tiktok-gradient);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            display: inline-block;
            transform: rotate(-5deg);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .header-subtitle {
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.1em;
            margin-bottom: 20px;
            max-width: 600px;
            margin: 0 auto 20px;
            line-height: 1.5;
        }
        
        .version-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid var(--tiktok-teal);
            color: var(--tiktok-teal);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            z-index: 2;
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        @media (min-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .stats-grid {
                grid-template-columns: repeat(8, 1fr);
            }
        }
        
        .stat-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--tiktok-gradient);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--tiktok-teal);
            box-shadow: var(--hover-glow);
        }
        
        .stat-card:hover::before {
            opacity: 1;
        }
        
        .stat-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
            background: var(--tiktok-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .stat-label {
            font-size: 0.85em;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 10px rgba(37, 244, 238, 0.3);
        }
        
        /* Main Content Area */
        .main-content {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 1024px) {
            .main-content {
                flex-direction: column;
            }
        }
        
        .left-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        .right-panel {
            flex: 2;
        }
        
        /* Click Area */
        .click-area {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 25px;
            padding: 40px;
            text-align: center;
            border: 2px solid rgba(37, 244, 238, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .click-area::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at center, rgba(37, 244, 238, 0.1) 0%, transparent 70%);
            pointer-events: none;
        }
        
        .tiktok-logo-container {
            position: relative;
            width: 250px;
            height: 250px;
            margin: 0 auto 30px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        @media (max-width: 768px) {
            .tiktok-logo-container {
                width: 200px;
                height: 200px;
            }
        }
        
        .tiktok-logo-container:hover {
            transform: scale(1.05);
        }
        
        .tiktok-logo-container:active {
            transform: scale(0.95);
        }
        
        .tiktok-logo {
            width: 100%;
            height: 100%;
            background: var(--tiktok-gradient);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 0 60px rgba(254, 44, 85, 0.7),
                inset 0 0 30px rgba(255, 255, 255, 0.1);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 60px rgba(254, 44, 85, 0.7); }
            50% { box-shadow: 0 0 80px rgba(37, 244, 238, 0.7); }
        }
        
        .tiktok-logo::before {
            content: '';
            position: absolute;
            width: 85%;
            height: 85%;
            background: #000;
            border-radius: 50%;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.8);
        }
        
        .music-note {
            position: absolute;
            color: white;
            font-size: 6em;
            z-index: 2;
            text-shadow: 
                0 0 20px var(--tiktok-teal),
                0 0 40px var(--tiktok-pink);
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }
        
        .click-info {
            font-size: 1.4em;
            color: var(--tiktok-teal);
            margin-top: 20px;
            font-weight: bold;
            text-shadow: 0 2px 10px rgba(37, 244, 238, 0.3);
        }
        
        .click-effects {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .click-effect {
            position: absolute;
            width: 40px;
            height: 40px;
            background: radial-gradient(circle, var(--tiktok-yellow) 0%, transparent 70%);
            border-radius: 50%;
            opacity: 0;
            animation: clickAnimation 1s ease-out;
        }
        
        @keyframes clickAnimation {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 0.8;
            }
            100% {
                transform: scale(3) rotate(180deg);
                opacity: 0;
            }
        }
        
        /* Tabs System */
        .tabs-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            padding: 5px;
            margin-bottom: 20px;
        }
        
        .tabs {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }
        
        .tab {
            flex: 1;
            min-width: 120px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            padding: 15px 20px;
            border-radius: 15px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }
        
        .tab:hover {
            background: rgba(255, 255, 255, 0.05);
            color: white;
        }
        
        .tab.active {
            background: var(--tiktok-gradient);
            color: white;
            box-shadow: 0 5px 20px rgba(37, 244, 238, 0.3);
        }
        
        .tab-icon {
            font-size: 1.2em;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Tab Sections */
        .section {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--tiktok-gradient);
        }
        
        .section-title {
            font-size: 1.8em;
            color: white;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .section-title i {
            background: var(--tiktok-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        /* Auto Clicker Section */
        .auto-clicker-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        
        /* Shop Items Grid */
        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        /* Upgrades Grid */
        .upgrades-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        
        /* Multiplier Grid */
        .multiplier-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            gap: 10px;
            margin-bottom: 25px;
        }
        
        /* Achievements Grid */
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        /* Cards */
        .shop-card, .upgrade-card, .achievement-card {
            background: rgba(40, 40, 40, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .shop-card::before, .upgrade-card::before, .achievement-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--tiktok-gradient);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .shop-card:hover, .upgrade-card:hover, .achievement-card:hover {
            transform: translateY(-5px);
            border-color: var(--tiktok-teal);
            box-shadow: var(--hover-glow);
        }
        
        .shop-card:hover::before, .upgrade-card:hover::before, .achievement-card:hover::before {
            opacity: 1;
        }
        
        .card-icon {
            font-size: 3em;
            margin-bottom: 20px;
            background: var(--tiktok-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .card-title {
            font-size: 1.3em;
            color: white;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .card-desc {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.95em;
            line-height: 1.5;
            margin-bottom: 20px;
        }
        
        .card-cost {
            color: var(--tiktok-yellow);
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        /* Buttons */
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 15px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            text-decoration: none;
            min-width: 160px;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn-primary {
            background: var(--tiktok-gradient);
            color: white;
            box-shadow: 0 5px 20px rgba(37, 244, 238, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(37, 244, 238, 0.4);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }
        
        .btn-danger {
            background: linear-gradient(90deg, #FF416C, #FF4B2B);
            color: white;
            box-shadow: 0 5px 20px rgba(255, 65, 108, 0.3);
        }
        
        .btn-danger:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 65, 108, 0.4);
        }
        
        .btn-success {
            background: linear-gradient(90deg, #00b09b, #96c93d);
            color: white;
            box-shadow: 0 5px 20px rgba(0, 176, 155, 0.3);
        }
        
        .btn-success:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 176, 155, 0.4);
        }
        
        .btn-small {
            padding: 10px 20px;
            font-size: 0.9em;
            min-width: 120px;
        }
        
        .btn-full {
            width: 100%;
        }
        
        /* Multiplier Buttons */
        .multiplier-btn {
            padding: 12px;
            background: rgba(40, 40, 40, 0.8);
            border: 2px solid rgba(37, 244, 238, 0.2);
            border-radius: 10px;
            color: white;
            font-weight: bold;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .multiplier-btn:hover {
            background: rgba(37, 244, 238, 0.1);
            border-color: var(--tiktok-teal);
            transform: translateY(-2px);
        }
        
        .multiplier-btn.active {
            background: var(--tiktok-gradient);
            border-color: transparent;
            box-shadow: 0 5px 15px rgba(37, 244, 238, 0.4);
        }
        
        .multiplier-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        /* Clicker Status */
        .clicker-status {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        
        .status-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }
        
        .status-value {
            font-size: 2em;
            font-weight: bold;
            color: var(--tiktok-teal);
            margin-bottom: 5px;
        }
        
        .status-label {
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.7);
        }
        
        /* Save/Load Section */
        .save-load-section {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
            border: 2px solid rgba(123, 97, 255, 0.3);
        }
        
        .save-load-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }
        
        .cookie-display {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid rgba(37, 244, 238, 0.3);
            word-break: break-all;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            max-height: 200px;
            overflow-y: auto;
            line-height: 1.4;
        }
        
        /* Progress Bars */
        .progress-container {
            margin: 20px 0;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--tiktok-gradient);
            border-radius: 6px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.3) 50%, 
                transparent 100%);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            background: linear-gradient(145deg, #1a1a1a, #000000);
            border-radius: 25px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            border: 2px solid var(--tiktok-teal);
            box-shadow: 
                0 0 60px rgba(37, 244, 238, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .modal-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--tiktok-gradient);
        }
        
        .modal-title {
            font-size: 2em;
            color: white;
            margin-bottom: 25px;
            text-align: center;
            background: var(--tiktok-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .modal-input {
            width: 100%;
            padding: 18px;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid rgba(123, 97, 255, 0.5);
            border-radius: 12px;
            color: white;
            font-size: 1em;
            margin-bottom: 25px;
            font-family: 'Courier New', monospace;
            transition: border-color 0.3s;
        }
        
        .modal-input:focus {
            outline: none;
            border-color: var(--tiktok-teal);
            box-shadow: 0 0 15px rgba(37, 244, 238, 0.3);
        }
        
        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 30px;
            right: 30px;
            background: linear-gradient(90deg, #1a1a1a, #000000);
            color: white;
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            z-index: 1001;
            transform: translateX(150%);
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            display: flex;
            align-items: center;
            gap: 15px;
            border-left: 4px solid var(--tiktok-teal);
            max-width: 400px;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification-icon {
            font-size: 1.5em;
        }
        
        /* Badges */
        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .badge-new {
            background: var(--tiktok-gradient);
            color: white;
        }
        
        .badge-sale {
            background: linear-gradient(90deg, #FFD600, #FF9500);
            color: black;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
                border-radius: 20px;
            }
            
            h1 {
                font-size: 2.5em;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                min-width: 100%;
            }
            
            .modal-content {
                padding: 25px;
            }
            
            .modal-buttons {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .upgrades-grid,
            .shop-grid,
            .achievements-grid {
                grid-template-columns: 1fr;
            }
            
            .multiplier-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .auto-clicker-controls {
                grid-template-columns: 1fr;
            }
            
            .clicker-status {
                grid-template-columns: 1fr;
            }
            
            .save-load-buttons {
                grid-template-columns: 1fr;
            }
        }
        
        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--tiktok-gradient);
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(90deg, #25F4EE, #FE2C55);
        }
        
        /* Utility Classes */
        .text-center {
            text-align: center;
        }
        
        .text-gradient {
            background: var(--tiktok-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .mb-20 {
            margin-bottom: 20px;
        }
        
        .mt-20 {
            margin-top: 20px;
        }
        
        .glow {
            text-shadow: 0 0 10px currentColor;
        }
        
        /* Particle Background */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: var(--tiktok-teal);
            border-radius: 50%;
            animation: floatParticle 20s infinite linear;
        }
        
        @keyframes floatParticle {
            0% {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(100px);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Particle Background -->
    <div class="particles" id="particles"></div>
    
    <div class="container">
        <div class="version-badge" id="version-badge">v24.02.15.1</div>
        
        <div class="header">
            <div class="title-container">
                <h1>TOK CLICKER PRO</h1>
                <div class="title-badge">ULTRA EDITION</div>
            </div>
            <p class="header-subtitle">
                Build your TikTok empire! Click, upgrade, and become the ultimate influencer with advanced features and unbeatable security.
            </p>
        </div>
        
        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">üëÅÔ∏è</div>
                <div class="stat-label">Total Views</div>
                <div id="views" class="stat-value">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚ö°</div>
                <div class="stat-label">Views/Click</div>
                <div id="views-per-click" class="stat-value">1</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üöÄ</div>
                <div class="stat-label">Views/Second</div>
                <div id="views-per-second" class="stat-value">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üë•</div>
                <div class="stat-label">Followers</div>
                <div id="followers" class="stat-value">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üí∞</div>
                <div class="stat-label">Coins</div>
                <div id="coins" class="stat-value">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üèÜ</div>
                <div class="stat-label">Prestige</div>
                <div id="prestige" class="stat-value">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üî•</div>
                <div class="stat-label">Streak</div>
                <div id="streak" class="stat-value">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üìà</div>
                <div class="stat-label">Multiplier</div>
                <div id="multiplier" class="stat-value">1.00x</div>
            </div>
        </div>
        
        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Left Panel -->
            <div class="left-panel">
                <!-- Click Area -->
                <div class="click-area">
                    <div class="tiktok-logo-container" id="click-button">
                        <div class="tiktok-logo">
                            <div class="music-note">‚ô™</div>
                        </div>
                        <div class="click-effects" id="click-effects"></div>
                    </div>
                    <div class="click-info">Click the TikTok logo to get views!</div>
                    
                    <!-- Streak Progress -->
                    <div class="progress-container">
                        <div class="progress-label">
                            <span>Daily Streak</span>
                            <span id="streak-days">0/7 days</span>
                        </div>
                        <div class="progress-bar">
                            <div id="streak-progress" class="progress-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <!-- Auto Clicker Controls -->
                    <div class="auto-clicker-controls mt-20">
                        <button class="btn btn-success btn-full" id="start-auto-clicker">
                            <i class="fas fa-play"></i> Start Auto-Clicker (1.9 CPS)
                        </button>
                        <button class="btn btn-danger btn-full" id="stop-auto-clicker">
                            <i class="fas fa-stop"></i> Stop Auto-Clicker
                        </button>
                        <button class="btn btn-secondary btn-full" id="boost-auto-clicker">
                            <i class="fas fa-bolt"></i> Boost to 3.8 CPS (100 coins)
                        </button>
                    </div>
                    
                    <!-- Auto Clicker Status -->
                    <div class="clicker-status">
                        <div class="status-card">
                            <div class="status-label">Auto-Clicker Status</div>
                            <div id="auto-clicker-status" class="status-value">OFF</div>
                        </div>
                        <div class="status-card">
                            <div class="status-label">Speed</div>
                            <div id="auto-clicker-speed" class="status-value">1.9 CPS</div>
                        </div>
                        <div class="status-card">
                            <div class="status-label">Total Auto-Clicks</div>
                            <div id="total-auto-clicks" class="status-value">0</div>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Stats -->
                <div class="section">
                    <h3 class="section-title"><i class="fas fa-chart-bar"></i> Quick Stats</h3>
                    <div class="clicker-status">
                        <div class="status-card">
                            <div class="status-label">Total Clicks</div>
                            <div id="total-clicks" class="status-value">0</div>
                        </div>
                        <div class="status-card">
                            <div class="status-label">Play Time</div>
                            <div id="play-time" class="status-value">0s</div>
                        </div>
                        <div class="status-card">
                            <div class="status-label">Total Multiplier</div>
                            <div id="total-multiplier" class="status-value">1.00x</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Right Panel -->
            <div class="right-panel">
                <!-- Tabs Navigation -->
                <div class="tabs-container">
                    <div class="tabs">
                        <button class="tab active" data-tab="upgrades">
                            <i class="fas fa-arrow-up tab-icon"></i> Upgrades
                        </button>
                        <button class="tab" data-tab="multipliers">
                            <i class="fas fa-chart-line tab-icon"></i> Multipliers
                        </button>
                        <button class="tab" data-tab="shop">
                            <i class="fas fa-store tab-icon"></i> Shop
                        </button>
                        <button class="tab" data-tab="achievements">
                            <i class="fas fa-trophy tab-icon"></i> Achievements
                        </button>
                        <button class="tab" data-tab="save">
                            <i class="fas fa-save tab-icon"></i> Save/Load
                        </button>
                    </div>
                </div>
                
                <!-- Tab Contents -->
                <div class="tab-content active" id="upgrades-tab">
                    <div class="section">
                        <h3 class="section-title"><i class="fas fa-arrow-up"></i> Content Upgrades</h3>
                        <div class="upgrades-grid" id="upgrades-container">
                            <!-- Upgrades will be generated here -->
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="multipliers-tab">
                    <div class="section">
                        <h3 class="section-title"><i class="fas fa-chart-line"></i> Multiplier Upgrades</h3>
                        <p class="mb-20" style="color: rgba(255,255,255,0.7); text-align: center;">
                            Buy permanent multipliers to multiply ALL your earnings! Each multiplier stacks multiplicatively.
                        </p>
                        <div class="multiplier-grid" id="multiplier-container">
                            <!-- Multipliers will be generated here -->
                        </div>
                        <div class="text-center mt-20">
                            <div style="font-size: 1.3em; margin-bottom: 10px;">
                                <span style="color: rgba(255,255,255,0.7);">Next Multiplier Cost:</span>
                                <span id="next-multiplier-cost" style="color: var(--tiktok-yellow); font-weight: bold; margin-left: 10px;">100</span>
                                <span style="color: var(--tiktok-yellow);"> coins</span>
                            </div>
                            <div style="font-size: 1.1em;">
                                <span style="color: rgba(255,255,255,0.7);">Total Multiplier Bonus:</span>
                                <span id="multiplier-bonus" style="color: var(--tiktok-teal); font-weight: bold; margin-left: 10px;">1.00x</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="shop-tab">
                    <div class="section">
                        <h3 class="section-title"><i class="fas fa-store"></i> Premium Shop</h3>
                        <div class="shop-grid">
                            <div class="shop-card">
                                <div class="card-icon">üé≠</div>
                                <div class="card-title">Effects Pack</div>
                                <div class="card-desc">Unlock special visual effects for your clicks and upgrades.</div>
                                <div class="card-cost">1,000 coins</div>
                                <button class="btn btn-secondary btn-full" onclick="buyShopItem('effects')">BUY NOW</button>
                            </div>
                            <div class="shop-card">
                                <div class="card-icon">üåà</div>
                                <div class="card-title">Rainbow Theme</div>
                                <div class="card-desc">Change the game colors to a vibrant rainbow theme.</div>
                                <div class="card-cost">5,000 coins</div>
                                <button class="btn btn-secondary btn-full" onclick="buyShopItem('theme')">BUY NOW</button>
                            </div>
                            <div class="shop-card">
                                <div class="card-icon">‚ö°</div>
                                <div class="card-title">Auto-Clicker Boost</div>
                                <div class="card-desc">Double your auto-clicker speed for 1 hour.</div>
                                <div class="card-cost">500 coins</div>
                                <button class="btn btn-secondary btn-full" onclick="buyShopItem('autoclicker')">BUY NOW</button>
                            </div>
                            <div class="shop-card">
                                <div class="card-icon">üíé</div>
                                <div class="card-title">Premium Multiplier</div>
                                <div class="card-desc">Add +0.5x to all your multipliers permanently.</div>
                                <div class="card-cost">10,000 coins</div>
                                <button class="btn btn-secondary btn-full" onclick="buyShopItem('premium')">BUY NOW</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="achievements-tab">
                    <div class="section">
                        <h3 class="section-title"><i class="fas fa-trophy"></i> Achievements</h3>
                        <div class="achievements-grid" id="achievements-container">
                            <!-- Achievements will be generated here -->
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="save-tab">
                    <div class="save-load-section">
                        <h3 class="section-title"><i class="fas fa-save"></i> Save & Load System</h3>
                        <p style="text-align: center; margin-bottom: 25px; color: rgba(255,255,255,0.7);">
                            Your progress is protected with military-grade encryption. Save files are version-locked and cannot be tampered with.
                        </p>
                        
                        <div class="save-load-buttons">
                            <button class="btn btn-primary" id="save-btn">
                                <i class="fas fa-download"></i> Save & Download File
                            </button>
                            <button class="btn btn-secondary" id="load-file-btn">
                                <i class="fas fa-upload"></i> Load from File
                            </button>
                            <button class="btn btn-secondary" id="load-cookie-btn">
                                <i class="fas fa-key"></i> Load from Code
                            </button>
                            <button class="btn btn-danger" id="reset-btn">
                                <i class="fas fa-trash"></i> Reset Game
                            </button>
                        </div>
                        
                        <div class="cookie-display mt-20" id="cookie-display">
                            Your encrypted save code will appear here after saving...
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Load Modal -->
    <div class="modal" id="load-modal">
        <div class="modal-content">
            <h2 class="modal-title">Load Game</h2>
            <p style="margin-bottom: 25px; color: rgba(255,255,255,0.7); text-align: center;">
                Choose how to load your game:
            </p>
            <div style="display: flex; flex-direction: column; gap: 20px;">
                <button class="btn btn-primary" id="load-file-input-btn">
                    <i class="fas fa-file-upload"></i> Upload Save File
                </button>
                <input type="file" id="file-upload" accept=".tok,.txt" style="display: none;">
                <div style="text-align: center; color: rgba(255,255,255,0.5);">OR</div>
                <textarea class="modal-input" id="cookie-input" placeholder="Paste your encrypted save code here..." rows="6"></textarea>
                <div class="modal-buttons">
                    <button class="btn btn-primary" id="load-cookie-confirm">Load Code</button>
                    <button class="btn btn-danger" id="close-modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Version Warning Modal -->
    <div class="modal" id="version-modal">
        <div class="modal-content">
            <h2 class="modal-title">‚ö†Ô∏è Version Warning</h2>
            <div style="text-align: center; margin-bottom: 25px;">
                <i class="fas fa-exclamation-triangle" style="font-size: 4em; color: #FFD600; margin-bottom: 20px;"></i>
                <p id="version-warning-text" style="color: rgba(255,255,255,0.7); margin-bottom: 25px; font-size: 1.1em;">
                    This save file is from an outdated version!
                </p>
                <div style="background: rgba(255, 214, 0, 0.1); padding: 20px; border-radius: 15px; margin-bottom: 25px; border: 1px solid rgba(255, 214, 0, 0.3);">
                    <div style="margin-bottom: 10px;">
                        <span style="color: rgba(255,255,255,0.7);">Save Version:</span>
                        <span id="save-version" style="color: #FFD600; font-weight: bold; margin-left: 10px;">Unknown</span>
                    </div>
                    <div>
                        <span style="color: rgba(255,255,255,0.7);">Current Version:</span>
                        <span id="current-version" style="color: #25F4EE; font-weight: bold; margin-left: 10px;">Unknown</span>
                    </div>
                </div>
                <p style="color: rgba(255,255,255,0.7); font-size: 0.95em;">
                    Loading outdated saves may cause issues. Some features may not work correctly.
                </p>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-danger" id="force-load-btn">
                    <i class="fas fa-exclamation-triangle"></i> Load Anyway
                </button>
                <button class="btn btn-secondary" id="cancel-load-btn">
                    <i class="fas fa-times"></i> Cancel
                </button>
            </div>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle notification-icon"></i>
        <span id="notification-text">Game saved successfully!</span>
    </div>
</body>

<script>
    // ==================== ENHANCED GAME STATE ====================
    const VERSION_MANAGER = {
        CURRENT_VERSION: "24.02.15.1",
        VERSION_HISTORY: {
            "24.01.15.1": { name: "January 2024", supported: false, changes: ["Initial release"] },
            "24.02.15.1": { 
                name: "February 2024", 
                supported: true, 
                changes: ["Auto-clicker system", "Multiplier upgrades", "Tab interface", "Enhanced visuals"] 
            }
        }
    };

    let gameState = {
        views: 0,
        viewsPerClick: 1,
        viewsPerSecond: 0,
        followers: 0,
        coins: 0,
        prestige: 0,
        streak: 0,
        lastPlayDate: null,
        multiplier: 1,
        totalClicks: 0,
        playTime: 0,
        
        autoClicker: {
            active: false,
            speed: 1.9,
            boosted: false,
            totalAutoClicks: 0,
            interval: null
        },
        
        multipliers: [],
        
        upgrades: {
            phone: { level: 0, cost: 50, multiplier: 1, name: "Smartphone Pro", desc: "4K video quality", icon: "üì±" },
            hashtags: { level: 0, cost: 200, multiplier: 2, name: "Hashtag Master", desc: "Trending hashtags", icon: "üè∑Ô∏è" },
            editing: { level: 0, cost: 500, multiplier: 5, name: "Editing Suite", desc: "Professional edits", icon: "üé¨" },
            trends: { level: 0, cost: 1000, multiplier: 10, name: "Trend Hunter", desc: "Viral content", icon: "üî•" },
            collab: { level: 0, cost: 2500, multiplier: 20, name: "Collab Network", desc: "Top creators", icon: "ü§ù" },
            algorithm: { level: 0, cost: 5000, multiplier: 50, name: "Algorithm Hack", desc: "Beat the system", icon: "ü§ñ" },
            sponsor: { level: 0, cost: 15000, multiplier: 100, name: "Brand Deals", desc: "Big sponsors", icon: "üí∞" },
            verified: { level: 0, cost: 50000, multiplier: 200, name: "Verified Badge", desc: "Official status", icon: "‚úÖ" },
            team: { level: 0, cost: 150000, multiplier: 500, name: "Content Team", desc: "Professional crew", icon: "üë•" },
            studio: { level: 0, cost: 500000, multiplier: 1000, name: "Production Studio", desc: "Hollywood level", icon: "üé•" }
        },
        
        shop: {
            effects: { bought: false, cost: 1000, name: "Effects Pack" },
            theme: { bought: false, cost: 5000, name: "Rainbow Theme" },
            autoclicker: { bought: false, cost: 500, name: "Auto-Clicker Boost" },
            premium: { bought: false, cost: 10000, name: "Premium Multiplier" }
        },
        
        achievements: {
            firstVideo: { unlocked: true, name: "First Video", desc: "Upload your first TikTok", reward: 100, icon: "üé¨" },
            viral: { unlocked: false, name: "Viral Video", desc: "Reach 10,000 views", reward: 1000, icon: "üî•" },
            trending: { unlocked: false, name: "Trending", desc: "Reach 100,000 views", reward: 5000, icon: "üìà" },
            famous: { unlocked: false, name: "TikTok Famous", desc: "Reach 1,000,000 views", reward: 25000, icon: "üëë" },
            influencer: { unlocked: false, name: "Influencer", desc: "Get 10,000 followers", reward: 50000, icon: "üåü" },
            millionaire: { unlocked: false, name: "Millionaire", desc: "Get 1,000,000 followers", reward: 250000, icon: "üíé" },
            clickMaster: { unlocked: false, name: "Click Master", desc: "Make 10,000 clicks", reward: 10000, icon: "‚ö°" },
            dailyPlayer: { unlocked: false, name: "Daily Player", desc: "Play for 7 days straight", reward: 15000, icon: "üìÖ" }
        },
        
        gameVersion: VERSION_MANAGER.CURRENT_VERSION,
        creationDate: new Date().toISOString(),
        lastSaveDate: null,
        securityHash: "",
        versionCompatible: true
    };

    // Initialize
    function initializeMultipliers() {
        gameState.multipliers = [];
        for (let i = 1; i <= 100; i++) {
            gameState.multipliers.push({
                level: i,
                bought: i === 1,
                cost: Math.floor(100 * Math.pow(1.3, i - 1)),
                multiplier: i
            });
        }
    }

    // DOM Elements
    const elements = {
        views: document.getElementById('views'),
        viewsPerClick: document.getElementById('views-per-click'),
        viewsPerSecond: document.getElementById('views-per-second'),
        followers: document.getElementById('followers'),
        coins: document.getElementById('coins'),
        prestige: document.getElementById('prestige'),
        streak: document.getElementById('streak'),
        multiplier: document.getElementById('multiplier'),
        streakDays: document.getElementById('streak-days'),
        streakProgress: document.getElementById('streak-progress'),
        clickButton: document.getElementById('click-button'),
        clickEffects: document.getElementById('click-effects'),
        upgradesContainer: document.getElementById('upgrades-container'),
        achievementsContainer: document.getElementById('achievements-container'),
        multiplierContainer: document.getElementById('multiplier-container'),
        totalMultiplier: document.getElementById('total-multiplier'),
        nextMultiplierCost: document.getElementById('next-multiplier-cost'),
        multiplierBonus: document.getElementById('multiplier-bonus'),
        totalClicks: document.getElementById('total-clicks'),
        playTime: document.getElementById('play-time'),
        autoClickerStatus: document.getElementById('auto-clicker-status'),
        autoClickerSpeed: document.getElementById('auto-clicker-speed'),
        totalAutoClicks: document.getElementById('total-auto-clicks'),
        versionBadge: document.getElementById('version-badge'),
        cookieDisplay: document.getElementById('cookie-display'),
        notification: document.getElementById('notification'),
        notificationText: document.getElementById('notification-text')
    };

    // Tab Management
    function initTabs() {
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.dataset.tab;
                
                // Update active tab
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Show corresponding content
                tabContents.forEach(content => {
                    content.classList.remove('active');
                    if (content.id === `${tabId}-tab`) {
                        content.classList.add('active');
                    }
                });
            });
        });
    }

    // Particle Background
    function createParticles() {
        const particlesContainer = document.getElementById('particles');
        const particleCount = 50;
        
        for (let i = 0; i < particleCount; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            
            // Random properties
            const size = Math.random() * 3 + 1;
            const left = Math.random() * 100;
            const animationDuration = Math.random() * 30 + 20;
            const animationDelay = Math.random() * 10;
            const color = Math.random() > 0.5 ? '25F4EE' : 'FE2C55';
            
            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;
            particle.style.left = `${left}vw`;
            particle.style.animationDuration = `${animationDuration}s`;
            particle.style.animationDelay = `${animationDelay}s`;
            particle.style.backgroundColor = `#${color}`;
            particle.style.opacity = Math.random() * 0.5 + 0.1;
            
            particlesContainer.appendChild(particle);
        }
    }

    // Enhanced Encryption (simplified for example)
    const encryption = {
        generateSaveCode: () => {
            const data = {
                ...gameState,
                securityHash: Date.now().toString(36),
                lastSaveDate: new Date().toISOString()
            };
            return `TKV2_${gameState.gameVersion}_${Date.now()}_${btoa(JSON.stringify(data))}`;
        },
        
        parseSaveCode: (code) => {
            try {
                const parts = code.split('_');
                if (parts.length < 4) return null;
                
                const version = parts[1];
                const base64Data = parts.slice(3).join('_');
                const data = JSON.parse(atob(base64Data));
                
                return {
                    data: data,
                    version: version
                };
            } catch {
                return null;
            }
        }
    };

    // Game Functions
    function calculateTotalMultiplier() {
        let total = gameState.multiplier;
        if (gameState.shop.premium.bought) total += 0.5;
        
        const purchasedMultipliers = gameState.multipliers.filter(m => m.bought);
        purchasedMultipliers.forEach(m => {
            total *= m.multiplier;
        });
        
        return total;
    }

    function updateDisplay() {
        const totalMultiplier = calculateTotalMultiplier();
        
        elements.views.textContent = formatNumber(gameState.views);
        elements.viewsPerClick.textContent = formatNumber(gameState.viewsPerClick * totalMultiplier);
        elements.viewsPerSecond.textContent = formatNumber(gameState.viewsPerSecond * totalMultiplier);
        elements.followers.textContent = formatNumber(gameState.followers);
        elements.coins.textContent = formatNumber(gameState.coins);
        elements.prestige.textContent = gameState.prestige;
        elements.streak.textContent = gameState.streak;
        elements.multiplier.textContent = totalMultiplier.toFixed(2) + 'x';
        elements.totalMultiplier.textContent = totalMultiplier.toFixed(2) + 'x';
        elements.multiplierBonus.textContent = totalMultiplier.toFixed(2) + 'x';
        elements.totalClicks.textContent = formatNumber(gameState.totalClicks);
        elements.playTime.textContent = formatTime(gameState.playTime);
        
        // Update streak
        const progress = (gameState.streak % 7) * (100 / 7);
        elements.streakProgress.style.width = progress + '%';
        elements.streakDays.textContent = `${gameState.streak % 7}/7 days`;
        
        // Update next multiplier cost
        const nextMultiplier = gameState.multipliers.find(m => !m.bought);
        elements.nextMultiplierCost.textContent = nextMultiplier ? formatNumber(nextMultiplier.cost) : "MAX";
        
        // Update auto-clicker display
        elements.autoClickerStatus.textContent = gameState.autoClicker.active ? "ON" : "OFF";
        elements.autoClickerStatus.style.color = gameState.autoClicker.active ? "#00FF00" : "#FF0000";
        elements.autoClickerSpeed.textContent = gameState.autoClicker.speed.toFixed(1) + " CPS";
        elements.totalAutoClicks.textContent = formatNumber(gameState.autoClicker.totalAutoClicks);
    }

    function formatNumber(num) {
        if (num >= 1e12) return (num / 1e12).toFixed(2) + 'T';
        if (num >= 1e9) return (num / 1e9).toFixed(2) + 'B';
        if (num >= 1e6) return (num / 1e6).toFixed(2) + 'M';
        if (num >= 1e3) return (num / 1e3).toFixed(2) + 'K';
        return Math.floor(num);
    }

    function formatTime(seconds) {
        const hours = Math.floor(seconds / 3600);
        const minutes = Math.floor((seconds % 3600) / 60);
        const secs = seconds % 60;
        
        if (hours > 0) return `${hours}h ${minutes}m`;
        if (minutes > 0) return `${minutes}m ${secs}s`;
        return `${secs}s`;
    }

    function showNotification(message, type = "success") {
        const icons = {
            success: "fa-check-circle",
            error: "fa-exclamation-circle",
            warning: "fa-exclamation-triangle",
            info: "fa-info-circle"
        };
        
        elements.notification.querySelector('.notification-icon').className = `fas ${icons[type] || icons.success} notification-icon`;
        elements.notificationText.textContent = message;
        
        elements.notification.classList.add('show');
        setTimeout(() => {
            elements.notification.classList.remove('show');
        }, 3000);
    }

    // Click Handler
    function handleClick(event) {
        const rect = elements.clickButton.getBoundingClientRect();
        const x = event.clientX - rect.left;
        const y = event.clientY - rect.top;
        
        // Visual effect
        const effect = document.createElement('div');
        effect.className = 'click-effect';
        effect.style.left = x + 'px';
        effect.style.top = y + 'px';
        elements.clickEffects.appendChild(effect);
        setTimeout(() => effect.remove(), 1000);
        
        // Game logic
        const totalMultiplier = calculateTotalMultiplier();
        const viewsGained = gameState.viewsPerClick * totalMultiplier;
        gameState.views += viewsGained;
        gameState.totalClicks++;
        
        if (Math.random() < 0.15) gameState.followers += Math.floor(totalMultiplier);
        if (Math.random() < 0.05) gameState.coins += Math.floor(totalMultiplier * 2);
        
        updateDisplay();
    }

    // Auto-clicker functions
    function startAutoClicker() {
        if (gameState.autoClicker.active) return;
        
        gameState.autoClicker.active = true;
        gameState.autoClicker.interval = setInterval(() => {
            const totalMultiplier = calculateTotalMultiplier();
            gameState.views += gameState.viewsPerClick * totalMultiplier;
            gameState.totalClicks++;
            gameState.autoClicker.totalAutoClicks++;
            
            if (Math.random() < 0.1) gameState.followers += Math.floor(totalMultiplier);
            if (Math.random() < 0.02) gameState.coins += Math.floor(totalMultiplier);
            
            updateDisplay();
        }, 1000 / gameState.autoClicker.speed);
        
        showNotification("Auto-clicker started! (" + gameState.autoClicker.speed + " CPS)", "success");
    }

    function stopAutoClicker() {
        if (!gameState.autoClicker.active) return;
        
        gameState.autoClicker.active = false;
        clearInterval(gameState.autoClicker.interval);
        gameState.autoClicker.interval = null;
        
        showNotification("Auto-clicker stopped!", "info");
    }

    function boostAutoClicker() {
        if (gameState.coins >= 100) {
            gameState.coins -= 100;
            gameState.autoClicker.speed = 3.8;
            gameState.autoClicker.boosted = true;
            
            if (gameState.autoClicker.active) {
                stopAutoClicker();
                startAutoClicker();
            }
            
            showNotification("Auto-clicker boosted to 3.8 CPS for 1 hour!", "success");
            
            setTimeout(() => {
                gameState.autoClicker.speed = 1.9;
                gameState.autoClicker.boosted = false;
                if (gameState.autoClicker.active) {
                    stopAutoClicker();
                    startAutoClicker();
                }
                showNotification("Auto-clicker boost expired!", "info");
            }, 60 * 60 * 1000);
        } else {
            showNotification("Need 100 coins to boost auto-clicker!", "error");
        }
    }

    // Render Functions
    function renderUpgrades() {
        elements.upgradesContainer.innerHTML = '';
        
        Object.entries(gameState.upgrades).forEach(([key, upgrade]) => {
            const canAfford = gameState.views >= upgrade.cost;
            const upgradeEl = document.createElement('div');
            upgradeEl.className = 'upgrade-card';
            upgradeEl.innerHTML = `
                <div class="card-icon">${upgrade.icon}</div>
                <div class="card-title">${upgrade.name} <span style="color: var(--tiktok-teal);">Lv.${upgrade.level}</span></div>
                <div class="card-desc">${upgrade.desc}</div>
                <div class="card-cost">${formatNumber(upgrade.cost)} views</div>
                <button class="btn ${canAfford ? 'btn-primary' : 'btn-secondary'} btn-full" 
                        onclick="purchaseUpgrade('${key}')" 
                        ${!canAfford ? 'disabled' : ''}>
                    ${canAfford ? 'UPGRADE' : 'NEED MORE VIEWS'}
                </button>
            `;
            
            if (!canAfford) upgradeEl.style.opacity = '0.7';
            elements.upgradesContainer.appendChild(upgradeEl);
        });
    }

    function renderMultipliers() {
        elements.multiplierContainer.innerHTML = '';
        
        gameState.multipliers.forEach((multiplier, index) => {
            const canAfford = gameState.coins >= multiplier.cost && !multiplier.bought;
            const btn = document.createElement('button');
            btn.className = `multiplier-btn ${multiplier.bought ? 'active' : ''} ${!canAfford && !multiplier.bought ? 'disabled' : ''}`;
            btn.textContent = `${multiplier.level}x`;
            btn.title = `Cost: ${formatNumber(multiplier.cost)} coins`;
            
            if (!multiplier.bought && canAfford) {
                btn.onclick = () => purchaseMultiplier(index);
            }
            
            elements.multiplierContainer.appendChild(btn);
        });
    }

    function purchaseUpgrade(key) {
        const upgrade = gameState.upgrades[key];
        if (gameState.views >= upgrade.cost) {
            gameState.views -= upgrade.cost;
            upgrade.level += 1;
            gameState.viewsPerSecond += upgrade.multiplier;
            upgrade.cost = Math.floor(upgrade.cost * 1.7);
            
            updateDisplay();
            renderUpgrades();
            showNotification(`Purchased ${upgrade.name} level ${upgrade.level}!`, "success");
        }
    }

    function purchaseMultiplier(index) {
        const multiplier = gameState.multipliers[index];
        if (!multiplier.bought && gameState.coins >= multiplier.cost) {
            gameState.coins -= multiplier.cost;
            multiplier.bought = true;
            
            updateDisplay();
            renderMultipliers();
            showNotification(`Purchased ${multiplier.level}x multiplier!`, "success");
        }
    }

    function buyShopItem(item) {
        const shopItem = gameState.shop[item];
        if (gameState.coins >= shopItem.cost && !shopItem.bought) {
            gameState.coins -= shopItem.cost;
            shopItem.bought = true;
            showNotification(`Purchased ${shopItem.name}!`, "success");
            updateDisplay();
        } else if (shopItem.bought) {
            showNotification("You already own this item!", "warning");
        } else {
            showNotification("Not enough coins!", "error");
        }
    }

    // Save/Load Functions
    function saveGame() {
        const saveCode = encryption.generateSaveCode();
        localStorage.setItem('tokClickerSaveCode', saveCode);
        
        // Display code
        elements.cookieDisplay.textContent = saveCode.substring(0, 150) + "...";
        
        // Download file
        const blob = new Blob([saveCode], { type: 'text/plain;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `tok_clicker_${Date.now()}.tok`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        showNotification("Game saved and file downloaded!", "success");
    }

    function loadFromCode() {
        const code = document.getElementById('cookie-input').value.trim();
        if (!code) {
            showNotification("Please enter a save code!", "warning");
            return;
        }
        
        const result = encryption.parseSaveCode(code);
        if (result) {
            // Simple load for demo
            Object.assign(gameState, result.data);
            initializeMultipliers();
            updateDisplay();
            renderUpgrades();
            renderMultipliers();
            showNotification("Game loaded successfully!", "success");
            document.getElementById('load-modal').style.display = 'none';
        } else {
            showNotification("Invalid save code!", "error");
        }
    }

    // Event Listeners
    function setupEventListeners() {
        // Click
        elements.clickButton.addEventListener('click', handleClick);
        elements.clickButton.addEventListener('touchstart', handleClick, { passive: true });
        
        // Auto-clicker
        document.getElementById('start-auto-clicker').addEventListener('click', startAutoClicker);
        document.getElementById('stop-auto-clicker').addEventListener('click', stopAutoClicker);
        document.getElementById('boost-auto-clicker').addEventListener('click', boostAutoClicker);
        
        // Save/Load
        document.getElementById('save-btn').addEventListener('click', saveGame);
        document.getElementById('load-cookie-btn').addEventListener('click', () => {
            document.getElementById('load-modal').style.display = 'flex';
        });
        document.getElementById('load-cookie-confirm').addEventListener('click', loadFromCode);
        document.getElementById('close-modal').addEventListener('click', () => {
            document.getElementById('load-modal').style.display = 'none';
        });
        
        // Reset
        document.getElementById('reset-btn').addEventListener('click', () => {
            if (confirm("Reset all progress?")) {
                gameState = {
                    ...gameState,
                    views: 0,
                    viewsPerClick: 1,
                    viewsPerSecond: 0,
                    followers: 0,
                    coins: 0,
                    prestige: 0,
                    streak: 0,
                    totalClicks: 0,
                    playTime: 0,
                    autoClicker: { active: false, speed: 1.9, boosted: false, totalAutoClicks: 0, interval: null },
                    multipliers: [],
                    lastSaveDate: null
                };
                
                Object.keys(gameState.upgrades).forEach(key => {
                    gameState.upgrades[key].level = 0;
                    gameState.upgrades[key].cost = {
                        phone: 50, hashtags: 200, editing: 500, trends: 1000,
                        collab: 2500, algorithm: 5000, sponsor: 15000,
                        verified: 50000, team: 150000, studio: 500000
                    }[key];
                });
                
                Object.keys(gameState.shop).forEach(key => {
                    gameState.shop[key].bought = false;
                });
                
                Object.keys(gameState.achievements).forEach(key => {
                    gameState.achievements[key].unlocked = key === 'firstVideo';
                });
                
                initializeMultipliers();
                updateDisplay();
                renderUpgrades();
                renderMultipliers();
                showNotification("Game reset!", "info");
            }
        });
        
        // File upload
        document.getElementById('load-file-input-btn').addEventListener('click', () => {
            document.getElementById('file-upload').click();
        });
        
        document.getElementById('file-upload').addEventListener('change', (e) => {
            if (e.target.files[0]) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    document.getElementById('cookie-input').value = event.target.result;
                };
                reader.readAsText(e.target.files[0]);
            }
        });
    }

    // Initialize Game
    function initGame() {
        // Version badge
        elements.versionBadge.textContent = `v${VERSION_MANAGER.CURRENT_VERSION}`;
        
        // Initialize systems
        initializeMultipliers();
        initTabs();
        createParticles();
        
        // Load from localStorage
        const saved = localStorage.getItem('tokClickerSaveCode');
        if (saved) {
            const result = encryption.parseSaveCode(saved);
            if (result) {
                Object.assign(gameState, result.data);
                showNotification("Game loaded from save!", "success");
            }
        }
        
        // Setup
        updateDisplay();
        renderUpgrades();
        renderMultipliers();
        setupEventListeners();
        
        // Game loop
        setInterval(() => {
            gameState.views += gameState.viewsPerSecond * calculateTotalMultiplier();
            gameState.playTime++;
            updateDisplay();
        }, 1000);
        
        // Auto-save
        setInterval(saveGame, 60000);
    }

    // Start the game
    window.addEventListener('DOMContentLoaded', initGame);
</script>
</html>
